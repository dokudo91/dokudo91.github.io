<!doctype html> <html lang=ja > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/katex/katex.min.css"> <link rel=stylesheet  href="/libs/highlight/github.min.css"> <meta name="twitter:card" content=summary > <meta name="twitter:title" content="Juliaã®ä¸–ç•Œ |&gt; Law of total varianceã‚’Juliaã§æ¤œè¨¼ã™ã‚‹"> <meta name="twitter:site" content="@dokudo91"> <meta name="twitter:description" content="Law of total varianceã‚’ç”·å¥³ã®èº«é•·ã®åˆ†å¸ƒã‚’ä¾‹ã«ç¢ºèªã—ãŸã€‚"> <meta name="twitter:image" content="https://dokudo91.github.io/assets/ã‚½ãƒ•ã‚£ãƒ¼ã®ä¸–ç•Œ.png"> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/basic.css"> <link rel=icon  href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text x=%220%22 y=%2280%22 font-family=%22Arial%22 font-size=%2285%22>ğŸ˜€</text></svg>"> <title>Law of total varianceã‚’Juliaã§æ¤œè¨¼ã™ã‚‹</title> <header> <div class=blog-name ><a href="/">Juliaã®ä¸–ç•Œ</a></div> </header> <div class=franklin-content >Law of total varianceã‚’ç”·å¥³ã®èº«é•·ã®åˆ†å¸ƒã‚’ä¾‹ã«ç¢ºèªã—ãŸã€‚ <h1 id=law_of_total_variance ><a href="#law_of_total_variance" class=header-anchor >Law of total variance</a></h1> <p>Law of total varianceã¯ä»¥ä¸‹ã®å¼ã§ã‚ã‚‹ã€‚</p> <span class=katex-display ><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML" display=block ><semantics><mrow><mi>V</mi><mi>a</mi><mi>r</mi><mo stretchy=false >(</mo><mi>Y</mi><mo stretchy=false >)</mo><mo>=</mo><mi>V</mi><mi>a</mi><mi>r</mi><mo stretchy=false >(</mo><mi>E</mi><mo stretchy=false >[</mo><mi>Y</mi><mo>âˆ£</mo><mi>X</mi><mo stretchy=false >]</mo><mo stretchy=false >)</mo><mo>+</mo><mi>E</mi><mo stretchy=false >[</mo><mi>V</mi><mi>a</mi><mi>r</mi><mo stretchy=false >(</mo><mi>Y</mi><mo>âˆ£</mo><mi>X</mi><mo stretchy=false >)</mo><mo stretchy=false >]</mo></mrow><annotation encoding="application/x-tex"> Var(Y)=Var(E[Yâˆ£X])+E[Var(Yâˆ£X)] </annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Va</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class=mopen >(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class=mclose >)</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Va</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class=mopen >(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class=mopen >[</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >âˆ£</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class=mclose >])</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class=mopen >[</span><span class="mord mathnormal">Va</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class=mopen >(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >âˆ£</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class=mclose >)]</span></span></span></span></span> <h2 id="å…·ä½“ä¾‹_ç”·å¥³ã®èº«é•·ã®åˆ†å¸ƒ"><a href="#å…·ä½“ä¾‹_ç”·å¥³ã®èº«é•·ã®åˆ†å¸ƒ" class=header-anchor >å…·ä½“ä¾‹ï¼š ç”·å¥³ã®èº«é•·ã®åˆ†å¸ƒ</a></h2> <p>Xã¯0ã‹ã‚‰1ã®ä¸€æ§˜åˆ†å¸ƒã€‚Yã¯ç”·å¥³åˆã‚ã›ãŸèº«é•·ã¨ã™ã‚‹ã€‚ ç”·ã®èº«é•·ã¯å¹³å‡170ã€æ¨™æº–åå·®10ã®æ­£è¦åˆ†å¸ƒã«å¾“ã†ã¨ã—ã€å¥³ã®èº«é•·ã¯å¹³å‡160ã€æ¨™æº–åå·®5ã®æ­£è¦åˆ†å¸ƒã«å¾“ã†ã¨ã™ã‚‹ã€‚ Yã®åˆ†å¸ƒã¯ç”·ã®åˆ†å¸ƒã¨å¥³ã®åˆ†å¸ƒã‚’6:4ã§æ··ãœåˆã‚ã›ãŸåˆ†å¸ƒã¨ã™ã‚‹ã€‚ã‚µãƒ³ãƒ—ãƒ«ã¯0â‰¤X&lt;0.6ã§ã‚ã‚Œã°ç”·ã®åˆ†å¸ƒã«0.6â‰¤Xâ‰¤1ã§ã‚ã‚Œã°å¥³ã®åˆ†å¸ƒã«å±ã™ã‚‹ã¨ã™ã‚‹ã€‚</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> Distributions, StatsPlots
Î¼m = <span class=hljs-number >170</span>
Ïƒm = <span class=hljs-number >10</span>
Î¼f = <span class=hljs-number >160</span>
Ïƒf = <span class=hljs-number >5</span>

dist_male = Normal(Î¼m, Ïƒm)
dist_female = Normal(Î¼f, Ïƒf)

Y = MixtureModel([dist_male, dist_female], [<span class=hljs-number >0.6</span>, <span class=hljs-number >0.4</span>])
plot(Y, label=[<span class=hljs-string >&quot;male PDF&quot;</span> <span class=hljs-string >&quot;female PDF&quot;</span>], yrotation=<span class=hljs-number >90</span>)
plot!(x-&gt;pdf(Y,x), label=<span class=hljs-string >&quot;Mixture PDF&quot;</span>)
savefig(joinpath(<span class=hljs-meta >@OUTPUT</span>, <span class=hljs-string >&quot;LawOfTotalVariance.svg&quot;</span>))
<span class=hljs-literal >nothing</span></code></pre><pre><code class="plaintext hljs">Failed to precompile StatsPlots [f3b207a7-027a-5e70-b257-86293d7955fd] to &quot;/home/runner/.julia/compiled/v1.9/StatsPlots/jl_Ebjj6R&quot;.
</code></pre> <p><span style="color:red;">// Image matching '/assets/pages/LawOfTotalVariance/code/LawOfTotalVariance' not found. //</span></p> <p>Distributionsãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦æ··åˆãƒ¢ãƒ‡ãƒ«ã‚’ä½œã£ã¦ã„ã‚‹ã€‚ã“ã®æ··åˆãƒ¢ãƒ‡ãƒ«ã®åˆ†æ•£ã‚’Law of total varianceã§è¨ˆç®—ã™ã‚‹ã€‚ Yã‹ã‚‰å–ã‚Šå‡ºã—ãŸã‚µãƒ³ãƒ—ãƒ«ã¯0.6ã®ç¢ºç‡ã§Î¼m&#61;170ã®ã€0.4ã®ç¢ºç‡ã§Î¼f&#61;160ã®åˆ†å¸ƒã«å«ã¾ã‚Œã‚‹ã€‚Yã‹ã‚‰å–ã‚Šå‡ºã—ãŸã‚µãƒ³ãƒ—ãƒ«ã®å¹³å‡ã®åˆ†æ•£Var&#40;E&#91;Y&#93;&#41;ã¯</p> <pre><code class="julia hljs">Var_E_Y = [(Î¼m - mean(Y))^<span class=hljs-number >2</span>, (Î¼f - mean(Y))^<span class=hljs-number >2</span>]</code></pre><pre><code class="plaintext hljs">UndefVarError: `Î¼m` not defined
</code></pre> <p>0.6ã®ç¢ºç‡ã§16ã€0.4ã®ç¢ºç‡ã§36ã¨ãªã‚‹ã€‚å¾“ã£ã¦</p> <pre><code class="julia hljs">Var_E_Y_given_X = <span class=hljs-number >0.6</span> * Var_E_Y[<span class=hljs-number >1</span>] + <span class=hljs-number >0.4</span> * Var_E_Y[<span class=hljs-number >2</span>]</code></pre><pre><code class="plaintext hljs">UndefVarError: `Var_E_Y` not defined
</code></pre> <p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mi>a</mi><mi>r</mi><mo stretchy=false >(</mo><mi>E</mi><mo stretchy=false >[</mo><mi>Y</mi><mi mathvariant=normal >âˆ£</mi><mi>X</mi><mo stretchy=false >]</mo><mo stretchy=false >)</mo><mo>=</mo><mn>24</mn></mrow><annotation encoding="application/x-tex">Var(E[Y|X])=24</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Va</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class=mopen >(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class=mopen >[</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class=mord >âˆ£</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class=mclose >])</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.64444em;vertical-align:0em;"></span><span class=mord >24</span></span></span></span>ã¨ãªã‚‹ã€‚Yã®åˆ†æ•£ã¯</p> <pre><code class="julia hljs">Var_Y=[Ïƒm^<span class=hljs-number >2</span>, Ïƒf^<span class=hljs-number >2</span>]</code></pre><pre><code class="plaintext hljs">UndefVarError: `Ïƒm` not defined
</code></pre> <p>0.6ã®ç¢ºç‡ã§100ã§ã‚ã‚Šã€0.4ã®ç¢ºç‡ã§25ã§ã‚ã‚‹ã€‚ãã®æœŸå¾…å€¤ã¯</p> <pre><code class="julia hljs">E_Var_Y_given_X = <span class=hljs-number >0.6</span> * Var_Y[<span class=hljs-number >1</span>] + <span class=hljs-number >0.4</span> * Var_Y[<span class=hljs-number >2</span>]</code></pre><pre><code class="plaintext hljs">UndefVarError: `Var_Y` not defined
</code></pre> <p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo stretchy=false >[</mo><mi>V</mi><mi>a</mi><mi>r</mi><mo stretchy=false >(</mo><mi>Y</mi><mi mathvariant=normal >âˆ£</mi><mi>X</mi><mo stretchy=false >)</mo><mo stretchy=false >]</mo><mo>=</mo><mn>70</mn></mrow><annotation encoding="application/x-tex">E[Var(Y|X)]=70</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class=mopen >[</span><span class="mord mathnormal">Va</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class=mopen >(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class=mord >âˆ£</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class=mclose >)]</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.64444em;vertical-align:0em;"></span><span class=mord >70</span></span></span></span>ã¨ãªã‚‹ã€‚ Law of total varianceã‚ˆã‚Š</p> <span class=katex-display ><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML" display=block ><semantics><mrow><mi>V</mi><mi>a</mi><mi>r</mi><mo stretchy=false >(</mo><mi>Y</mi><mo stretchy=false >)</mo><mo>=</mo><mi>V</mi><mi>a</mi><mi>r</mi><mo stretchy=false >(</mo><mi>E</mi><mo stretchy=false >[</mo><mi>Y</mi><mo>âˆ£</mo><mi>X</mi><mo stretchy=false >]</mo><mo stretchy=false >)</mo><mo>+</mo><mi>E</mi><mo stretchy=false >[</mo><mi>V</mi><mi>a</mi><mi>r</mi><mo stretchy=false >(</mo><mi>Y</mi><mo>âˆ£</mo><mi>X</mi><mo stretchy=false >)</mo><mo stretchy=false >]</mo><mo>=</mo><mn>24</mn><mo>+</mo><mn>70</mn><mo>=</mo><mn>94</mn></mrow><annotation encoding="application/x-tex"> Var(Y)=Var(E[Yâˆ£X])+E[Var(Yâˆ£X)]=24+70=94 </annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Va</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class=mopen >(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class=mclose >)</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Va</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class=mopen >(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class=mopen >[</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >âˆ£</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class=mclose >])</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class=mopen >[</span><span class="mord mathnormal">Va</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class=mopen >(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >âˆ£</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class=mclose >)]</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.72777em;vertical-align:-0.08333em;"></span><span class=mord >24</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.64444em;vertical-align:0em;"></span><span class=mord >70</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.64444em;vertical-align:0em;"></span><span class=mord >94</span></span></span></span></span> <p>MixtureModelã¯ç›´æ¥ã€åˆ†æ•£ã‚’è¨ˆç®—ã§ãã‚‹ã®ã§å€¤ã‚’ç¢ºèªã™ã‚‹ã€‚</p> <pre><code class="julia hljs">var(Y)</code></pre><pre><code class="plaintext hljs">UndefVarError: `Y` not defined
</code></pre> <p>åŒã˜å€¤ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ããŸã€‚</p> <div class=page-foot > <div class=copyright > &copy; dokudo91. Last modified: September 28, 2023. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div>